<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.chart.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.web.*?>

<BorderPane xmlns="http://javafx.com/javafx/25"
    xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="com.javafx.proyecto.controlador"
    prefHeight="650.0" prefWidth="950.0"
    stylesheets="@styles.css">

    <top>
        <HBox fx:id="barraCrud" prefHeight="54.0" spacing="25.0" alignment="CENTER_LEFT"
            visible="true" managed="true">
            <padding>
                <Insets top="12.0" right="18.0" bottom="12.0" left="18.0" />
            </padding>
            <children>
                <Button fx:id="btnNuevo" text="_Nuevo" contentDisplay="TOP">
                    <graphic>
                        <ImageView fitHeight="31.0" fitWidth="31.0" preserveRatio="true">
                            <image>
                                <Image url="@miapp/icons/nuevo.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
                <Button fx:id="btnEditar" text="_Editar" contentDisplay="TOP">
                    <graphic>
                        <ImageView fitHeight="31.0" fitWidth="31.0" preserveRatio="true">
                            <image>
                                <Image url="@miapp/icons/editar.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
                <Button fx:id="btnEliminar" text="E_liminar" contentDisplay="TOP">
                    <graphic>
                        <ImageView fitHeight="31.0" fitWidth="31.0" preserveRatio="true">
                            <image>
                                <Image url="@miapp/icons/eliminar.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
            </children>
        </HBox>
    </top>

    <left>
        <VBox prefHeight="378.0" prefWidth="150.0" spacing="15.0">
            <padding>
                <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
            </padding>
            <children>
                <Button fx:id="btnInicio" contentDisplay="TOP" prefHeight="60.0" prefWidth="150.0"
                    text="_Inicio" mnemonicParsing="true">
                    <graphic>
                        <ImageView fitHeight="40.0" fitWidth="40.0" preserveRatio="true">
                            <image>
                                <Image url="@miapp/icons/home.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>

                <Button fx:id="btnUsuarios" contentDisplay="TOP" prefHeight="60.0" prefWidth="150.0"
                    text="_Usuarios" mnemonicParsing="true">
                    <graphic>
                        <ImageView fitHeight="40.0" fitWidth="40.0" preserveRatio="true">
                            <image>
                                <Image url="@miapp/icons/usuario.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>

                <Button fx:id="btnMascotas" contentDisplay="TOP" prefHeight="60.0" prefWidth="150.0"
                    text="_Mascotas" mnemonicParsing="true">
                    <graphic>
                        <ImageView fitHeight="40.0" fitWidth="40.0" preserveRatio="true">
                            <image>
                                <Image url="@miapp/icons/paw.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>

                <Button fx:id="btnAdopciones" contentDisplay="TOP" prefHeight="60.0"
                    prefWidth="150.0" text="_Adopciones" mnemonicParsing="true">
                    <graphic>
                        <ImageView fitHeight="40.0" fitWidth="40.0" preserveRatio="true">
                            <image>
                                <Image url="@miapp/icons/form.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>

                <Button fx:id="btnInformes" contentDisplay="TOP" prefHeight="60.0" prefWidth="150.0"
                    text="I_nformes" mnemonicParsing="true">
                    <graphic>
                        <ImageView fitHeight="40.0" fitWidth="40.0" preserveRatio="true">
                            <image>
                                <Image url="@miapp/icons/informes.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
            </children>
        </VBox>
    </left>

    <center>
        <StackPane fx:id="stackContenido">

            <AnchorPane fx:id="vistaInicio" visible="true">
                <children>

                    <Label text="Inicio"
                        layoutX="30" layoutY="10"
                        style="-fx-font-size: 16px; -fx-font-weight: bold;" />

                    <Label text="Bienvenido a PawLink"
                        layoutX="30" layoutY="40"
                        style="-fx-font-size: 28px; -fx-font-weight: bold;" />

                    <HBox layoutX="30" layoutY="90" spacing="20">
                        <children>

                            <VBox prefWidth="180" prefHeight="80"
                                style="-fx-background-color: #FFFFFF;
                                         -fx-border-color: #CCCCCC;
                                         -fx-background-radius:8;
                                         -fx-border-radius:8;
                                         -fx-padding:10;">
                                <children>
                                    <Label text="Usuarios activos"
                                        style="-fx-font-weight:bold;" />
                                    <Label fx:id="lblUsuariosActivos" text="0"
                                        style="-fx-font-size: 24px;" />
                                </children>
                            </VBox>

                            <VBox prefWidth="180" prefHeight="80"
                                style="-fx-background-color: #FFFFFF;
                                         -fx-border-color: #CCCCCC;
                                         -fx-background-radius:8;
                                         -fx-border-radius:8;
                                         -fx-padding:10;">
                                <children>
                                    <Label text="Mascotas registradas"
                                        style="-fx-font-weight:bold;" />
                                    <Label fx:id="lblMascotasRegistradas" text="0"
                                        style="-fx-font-size: 24px;" />
                                </children>
                            </VBox>

                            <VBox prefWidth="180" prefHeight="80"
                                style="-fx-background-color: #FFFFFF;
                                         -fx-border-color: #CCCCCC;
                                         -fx-background-radius:8;
                                         -fx-border-radius:8;
                                         -fx-padding:10;">
                                <children>
                                    <Label text="Adopciones activas"
                                        style="-fx-font-weight:bold;" />
                                    <Label fx:id="lblAdopcionesActivas" text="0"
                                        style="-fx-font-size: 24px;" />
                                </children>
                            </VBox>

                        </children>
                    </HBox>

                    <Label text="Últimos registros"
                        layoutX="30" layoutY="190"
                        style="-fx-font-weight:bold;" />

                    <TableView fx:id="tablaUltimos"
                        layoutX="30" layoutY="215"
                        prefWidth="320" prefHeight="280">
                        <columns>
                            <TableColumn fx:id="colUltimoDescripcion"
                                text="Registro" prefWidth="200" />
                            <TableColumn fx:id="colUltimoFecha"
                                text="Fecha" prefWidth="120" />
                        </columns>
                    </TableView>

                    <BarChart fx:id="graficaEspecies"
                        layoutX="380" layoutY="215"
                        prefWidth="360" prefHeight="280">
                        <xAxis>
                            <CategoryAxis label="Especie" />
                        </xAxis>
                        <yAxis>
                            <NumberAxis label="Número de adopciones" />
                        </yAxis>
                    </BarChart>

                </children>
            </AnchorPane>


            <AnchorPane fx:id="vistaUsuarios" visible="false">
                <children>
                    <Label text="Gestión de Usuarios"
                        layoutX="30" layoutY="20"
                        style="-fx-font-size: 16px; -fx-font-weight: bold;" />

                    <HBox layoutX="30" layoutY="60" spacing="10">
                        <children>
                            <ComboBox fx:id="comboBuscarUsuarioNombre" promptText="Buscar por nombre"
                                prefWidth="140" editable="true" />
                            <ComboBox fx:id="comboBuscarUsuarioEmail" promptText="Buscar por email"
                                prefWidth="140" editable="true" />
                            <ComboBox fx:id="comboBuscarUsuarioTelefono" promptText="Buscar por teléfono"
                                prefWidth="140" editable="true" />
                            <ComboBox fx:id="comboBuscarUsuarioDireccion" promptText="Buscar por dirección"
                                prefWidth="140" editable="true" />
                            <Button fx:id="btnLimpiarUsuarios" text="_Buscar" mnemonicParsing="true" />
                        </children>
                    </HBox>

                    <Label fx:id="lblErrorConexionUsuarios" text="⚠ Error: No se pudo conectar a la base de datos"
                        layoutX="30" layoutY="100"
                        style="-fx-font-size: 13px; -fx-text-fill: #d32f2f; -fx-font-weight: bold; -fx-background-color: #ffebee; -fx-padding: 8px; -fx-border-color: #d32f2f; -fx-border-width: 1px;"
                        visible="false" managed="false" />

                    <TableView fx:id="tablaUsuarios"
                        layoutX="30" layoutY="140"
                        prefHeight="400" prefWidth="740">
                        <columns>
                            <TableColumn fx:id="colUsuarioId" text="ID" prefWidth="60" />
                            <TableColumn fx:id="colUsuarioNombre" text="Nombre" prefWidth="150" />
                            <TableColumn fx:id="colUsuarioEmail" text="Email" prefWidth="180" />
                            <TableColumn fx:id="colUsuarioTelefono" text="Teléfono" prefWidth="120" />
                            <TableColumn fx:id="colUsuarioDireccion" text="Dirección"
                                prefWidth="180" />
                            <TableColumn fx:id="colUsuarioActivo" text="Activo" prefWidth="80" />
                        </columns>
                    </TableView>
                </children>
            </AnchorPane>

            <AnchorPane fx:id="vistaMascotas" visible="false">
                <children>
                    <Label text="Gestión de Mascotas"
                        layoutX="30" layoutY="20"
                        style="-fx-font-size: 16px; -fx-font-weight: bold;" />

                    <HBox layoutX="30" layoutY="60" spacing="10">
                        <children>
                            <ComboBox fx:id="comboBuscarMascotaNombre" promptText="Buscar por nombre"
                                prefWidth="140" editable="true" />
                            <ComboBox fx:id="comboBuscarMascotaEspecie" promptText="Buscar por especie"
                                prefWidth="140" editable="true" />
                            <ComboBox fx:id="comboBuscarMascotaRaza" promptText="Buscar por raza"
                                prefWidth="140" editable="true" />
                            <ComboBox fx:id="comboBuscarMascotaEstadoSalud" promptText="Buscar por estado salud"
                                prefWidth="140" editable="true" />
                            <Button fx:id="btnLimpiarMascotas" text="_Buscar" mnemonicParsing="true" />
                        </children>
                    </HBox>

                    <Label fx:id="lblErrorConexionMascotas" text="⚠ Error: No se pudo conectar a la base de datos"
                        layoutX="30" layoutY="100"
                        style="-fx-font-size: 13px; -fx-text-fill: #d32f2f; -fx-font-weight: bold; -fx-background-color: #ffebee; -fx-padding: 8px; -fx-border-color: #d32f2f; -fx-border-width: 1px;"
                        visible="false" managed="false" />

                    <TableView fx:id="tablaMascotas"
                        layoutX="30" layoutY="140"
                        prefHeight="400" prefWidth="740">
                        <columns>
                            <TableColumn fx:id="colMascotaId" text="ID" prefWidth="60" />
                            <TableColumn fx:id="colMascotaNombre" text="Nombre" prefWidth="130" />
                            <TableColumn fx:id="colMascotaEspecie" text="Especie" prefWidth="110" />
                            <TableColumn fx:id="colMascotaRaza" text="Raza" prefWidth="140" />
                            <TableColumn fx:id="colMascotaFechaNac" text="F. nacimiento"
                                prefWidth="110" />
                            <TableColumn fx:id="colMascotaPeso" text="Peso (kg)" prefWidth="80" />
                            <TableColumn fx:id="colMascotaEstadoSalud" text="Estado salud"
                                prefWidth="150" />
                            <TableColumn fx:id="colMascotaDisponible" text="Disponible"
                                prefWidth="90" />
                        </columns>
                    </TableView>
                </children>
            </AnchorPane>

            <AnchorPane fx:id="vistaAdopciones" visible="false">
                <children>
                    <Label text="Gestión de Adopciones"
                        layoutX="30" layoutY="20"
                        style="-fx-font-size: 16px; -fx-font-weight: bold;" />

                    <HBox layoutX="30" layoutY="60" spacing="10">
                        <children>
                            <ComboBox fx:id="comboBuscarAdopcionMascota" promptText="Buscar por mascota"
                                prefWidth="140" editable="true" />
                            <ComboBox fx:id="comboBuscarAdopcionVoluntario" promptText="Buscar por voluntario"
                                prefWidth="140" editable="true" />
                            <ComboBox fx:id="comboBuscarAdopcionEstado" promptText="Buscar por estado"
                                prefWidth="140" editable="true" />
                            <ComboBox fx:id="comboBuscarAdopcionCalificacion" promptText="Buscar por calificación"
                                prefWidth="140" editable="true" />
                            <Button fx:id="btnLimpiarAdopciones" text="_Buscar" mnemonicParsing="true" />
                        </children>
                    </HBox>

                    <Label fx:id="lblErrorConexionAdopciones" text="⚠ Error: No se pudo conectar a la base de datos"
                        layoutX="30" layoutY="100"
                        style="-fx-font-size: 13px; -fx-text-fill: #d32f2f; -fx-font-weight: bold; -fx-background-color: #ffebee; -fx-padding: 8px; -fx-border-color: #d32f2f; -fx-border-width: 1px;"
                        visible="false" managed="false" />

                    <TableView fx:id="tablaAdopciones"
                        layoutX="30" layoutY="140"
                        prefHeight="400" prefWidth="740">
                        <columns>
                            <TableColumn fx:id="colAdopcionId" text="ID" prefWidth="60" />
                            <TableColumn fx:id="colAdopcionMascota" text="Mascota" prefWidth="140" />
                            <TableColumn fx:id="colAdopcionVoluntario" text="Voluntario"
                                prefWidth="140" />
                            <TableColumn fx:id="colAdopcionFechaInicio" text="F. inicio"
                                prefWidth="100" />
                            <TableColumn fx:id="colAdopcionFechaFin" text="F. fin" prefWidth="100" />
                            <TableColumn fx:id="colAdopcionEstado" text="Estado" prefWidth="100" />
                            <TableColumn fx:id="colAdopcionCalificacion" text="Calificación"
                                prefWidth="100" />
                        </columns>
                    </TableView>
                </children>
            </AnchorPane>

            <AnchorPane fx:id="vistaInformes" visible="false">
                <children>

                    <Label text="Informes JasperReports"
                        layoutX="30" layoutY="10"
                        style="-fx-font-size: 22px; -fx-font-weight: bold;" />

                    <!-- Sección Informe de Mascotas -->
                    <Label text="Informe de Mascotas (con gráficas)"
                        layoutX="30" layoutY="50"
                        style="-fx-font-weight:bold; -fx-font-size: 14px;" />

                    <HBox layoutX="30" layoutY="80" spacing="10">
                        <children>
                            <Button fx:id="btnMascotasIncrustado" text="Ver Incrustado"
                                style="-fx-background-color:#276FBF; -fx-text-fill:white;" />
                            <Button fx:id="btnMascotasVentana" text="Ver en Ventana"
                                style="-fx-background-color:#5C6BC0; -fx-text-fill:white;" />
                            <Button fx:id="btnMascotasPdf" text="Exportar PDF"
                                style="-fx-background-color:#4CAF50; -fx-text-fill:white;" />
                        </children>
                    </HBox>

                    <!-- Sección Informe de Adopciones -->
                    <Label text="Informe de Adopciones (con filtro y gráfica)"
                        layoutX="30" layoutY="130"
                        style="-fx-font-weight:bold; -fx-font-size: 14px;" />

                    <HBox layoutX="30" layoutY="160" spacing="10" alignment="CENTER_LEFT">
                        <children>
                            <Label text="Filtrar:" />
                            <ComboBox fx:id="comboFiltroEstadoInforme" prefWidth="120" />
                            <Button fx:id="btnAdopcionesIncrustado" text="Ver Incrustado"
                                style="-fx-background-color:#276FBF; -fx-text-fill:white;" />
                            <Button fx:id="btnAdopcionesVentana" text="Ver en Ventana"
                                style="-fx-background-color:#5C6BC0; -fx-text-fill:white;" />
                            <Button fx:id="btnAdopcionesPdf" text="Exportar PDF"
                                style="-fx-background-color:#4CAF50; -fx-text-fill:white;" />
                        </children>
                    </HBox>

                    <!-- WebView para mostrar informe incrustado -->
                    <Label text="Vista previa del informe:"
                        layoutX="30" layoutY="210"
                        style="-fx-font-weight:bold;" />

                    <WebView fx:id="webViewInforme"
                        layoutX="30" layoutY="240"
                        prefWidth="720" prefHeight="300" />

                </children>
            </AnchorPane>


        </StackPane>
    </center>
</BorderPane>